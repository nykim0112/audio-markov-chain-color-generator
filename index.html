<!doctype html>
<html lang="en">

<head>
    <title>New Melody Color Generator</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> -->

    <script type="text/javascript" src="https://unpkg.com/tone@latest/build/Tone.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@tonejs/ui@0.0.8/build/tonejs-ui.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@tonejs/midi"></script>
    <script src="./node_modules/@tonejs/midi/build/Midi.js"></script>
    <script src="./node_modules/tone/build/Tone.js"></script>
    <script type="module" src="./glowparticle.js"></script>

    <style>
        .center-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100vh;
        }
    </style>

</head>

<body class="p-4 center-screen">
    <canvas id="colorscreen" style="position:fixed; top: 0; left: 0; z-index: -1; width: 100vw; height: 100vh;" width="100%" height="100%"></canvas>
    <div class="container">
        <div class="row m-2">
            <div class="col m-2">
                <h5>ðŸŽ¨ Markov Chain Color Generator ðŸŽ¨</h5>
                <p>To begin, click on <b class="text-primary">Upload File</b> to upload a MIDI (<code>.mid</code>, <code>.midi</code>) file.
                    <br> Then, click on <b class="text-primary">Play</b> to play the newly generated sequence of notes! ðŸŽ‰
                    <br> When you upload a new file or change any of the parameters below, make sure to click <b class="text-primary">Reset/Apply Changes</b> before clicking Play again.</p>
            </div>
        </div>
        <div class="row m-2">
            <div class="col m-2">
                <button type="button" id="play" class="btn btn-primary m-1">Play</button>
                <button type="button" id="reset" class="btn btn-primary m-1">Reset / Apply Changes</button>
                <input type="file" id="file" accept="audio.midi" hidden="hidden" />
                <button class="btn btn-primary m-1" type="button" id="uploadFile">Upload File</button>
            </div>
        </div>
        <div class="row m-2" id="control_panel">

            <div class="col-md p-3 m-2">
                <h6> Order of Markov chain </h6>
                <input type="number" id="nOrder" min="0" max="3" steps="1" value="2" list="nOrder"></input>
            </div>

            <div class="col-md p-3 m-2">
                <h6> Length of generated melody </h6>
                <input type="range" id="numOfNotes" min="0" max="200" steps="1" value="50" list="tickmarks"></input>

                <datalist id="tickmarks">
                                <option value="0"></option>
                                <option value="20"></option>
                                <option value="40"></option>
                                <option value="60"></option>
                                <option value="80"></option>
                                <option value="100"></option>
                                <option value="120"></option>
                                <option value="140"></option>
                                <option value="160"></option>
                                <option value="180"></option>
                                <option value="200"></option>
                                </datalist>
            </div>
            <div class="col-md p-3 m-2">
                <div class="custom-control custom-switch" style="margin: auto">
                    <input type="checkbox" class="custom-control-input" id="additive-synth">
                    <label class="custom-control-label" for="additive-synth">Additive Synthesis</label>
                </div>
            </div>
        </div>

    </div>


    <script type="module" src="filter.js"></script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


</body>

</html>